import{r as p,u as x,j as s,c as j,f as F,b as H,A as B,d as R,B as $,D,E as I}from"./index-w5WXYR20.js";import{z as h,u as P,t as T,I as v}from"./Input-KNhKkL07.js";import{H as q}from"./Heading-byprMz6S.js";import{R as U,C as z}from"./Row-9IJhNHLd.js";import{u as O}from"./hook-QGmkEYFx.js";import{u as Y}from"./useEventCallback-cqNgmRpt.js";import{f as _,C as V,F as w}from"./CloseButton-d28tGAbJ.js";import{A as W}from"./Anchor-JmhY8Rv6.js";import{F as G,S as J}from"./Spinner-jRSRzx3H.js";import{B as K}from"./Button-B8bqqsnv.js";import"./index-VvQZwdVc.js";import"./Button-MA_ylKNZ.js";const S=_("h4");S.displayName="DivStyledAsH4";const C=p.forwardRef(({className:r,bsPrefix:e,as:t=S,...a},o)=>(e=x(e,"alert-heading"),s.jsx(t,{ref:o,className:j(r,e),...a})));C.displayName="AlertHeading";const M=C,N=p.forwardRef(({className:r,bsPrefix:e,as:t=W,...a},o)=>(e=x(e,"alert-link"),s.jsx(t,{ref:o,className:j(r,e),...a})));N.displayName="AlertLink";const Q=N,E=p.forwardRef((r,e)=>{const{bsPrefix:t,show:a=!0,closeLabel:o="Close alert",closeVariant:l,className:c,children:d,variant:n="primary",onClose:i,dismissible:u,transition:m=w,...A}=O(r,{show:"onClose"}),g=x(t,"alert"),L=Y(k=>{i&&i(!1,k)}),f=m===!0?w:m,b=s.jsxs("div",{role:"alert",...f?void 0:A,ref:e,className:j(c,g,n&&`${g}-${n}`,u&&`${g}-dismissible`),children:[u&&s.jsx(V,{onClick:L,"aria-label":o,variant:l}),d]});return f?s.jsx(f,{unmountOnExit:!0,...A,ref:void 0,in:a,children:b}):a?b:null});E.displayName="Alert";const y=Object.assign(E,{Link:Q,Heading:M}),X=h.object({email:h.string().min(1,{message:"Email address is required"}).email(),password:h.string().min(1,{message:"Password is required"})}),Z=()=>{const r=F(),e=H(),[t,a]=B(),{error:o,loading:l,accessToken:c}=R(m=>m.auth),{register:d,handleSubmit:n,formState:{errors:i}}=P({mode:"onBlur",resolver:T(X)}),u=async m=>{t.get("message")&&a(""),r(D(m)).unwrap().then(()=>{e("/")})};return p.useEffect(()=>()=>{r($())},[r]),{error:o,loading:l,accessToken:c,formErrors:i,searchParams:t,register:d,handleSubmit:n,submitForm:u}},us=()=>{var n,i;const{error:r,loading:e,accessToken:t,formErrors:a,searchParams:o,register:l,handleSubmit:c,submitForm:d}=Z();return t?s.jsx(I,{to:"/"}):s.jsxs(s.Fragment,{children:[s.jsx(q,{title:"User Login"}),s.jsx(U,{children:s.jsxs(z,{md:{span:6,offset:3},children:[o.get("message")==="login_required"&&s.jsx(y,{variant:"success",children:"You need to login to view this content"}),o.get("message")==="account_created"&&s.jsx(y,{variant:"success",children:"Your account successfully created, please login"}),s.jsxs(G,{onSubmit:c(d),children:[s.jsx(v,{name:"email",label:"Email Address",register:l,error:(n=a.email)==null?void 0:n.message}),s.jsx(v,{type:"password",name:"password",label:"Password",register:l,error:(i=a.password)==null?void 0:i.message}),s.jsx(K,{variant:"info",type:"submit",style:{color:"white"},children:e==="pending"?s.jsxs(s.Fragment,{children:[s.jsx(J,{animation:"border",size:"sm"})," Loading..."]}):"Submit"}),r&&s.jsx("p",{style:{color:"#DC3545",marginTop:"10px"},children:r})]})]})})]})};export{us as default};
