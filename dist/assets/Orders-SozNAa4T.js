import{r as p,u as b,c as g,j as s,f as P,d as w,H as y,v as H}from"./index-w5WXYR20.js";import{b as $,M as m,L as v}from"./styles.module-IzXs-fqV.js";import{H as M}from"./Heading-byprMz6S.js";import"./Row-9IJhNHLd.js";import"./CloseButton-d28tGAbJ.js";import"./useEventCallback-cqNgmRpt.js";import"./index-VvQZwdVc.js";import"./AbstractModalHeader-YBWbD3sk.js";import"./DataKey-N3U1ILTk.js";import"./Spinner-jRSRzx3H.js";import"./Button-B8bqqsnv.js";import"./Button-MA_ylKNZ.js";const N=p.forwardRef(({bsPrefix:t,className:n,striped:d,bordered:o,borderless:i,hover:c,size:a,variant:e,responsive:x,...u},l)=>{const r=b(t,"table"),j=g(n,r,e&&`${r}-${e}`,a&&`${r}-${a}`,d&&`${r}-${typeof d=="string"?`striped-${d}`:"striped"}`,o&&`${r}-bordered`,i&&`${r}-borderless`,c&&`${r}-hover`),h=s.jsx("table",{...u,className:j,ref:l});if(x){let f=`${r}-responsive`;return typeof x=="string"&&(f=`${f}-${x}`),s.jsx("div",{className:f,children:h})}return h}),I=N,O=({title:t,img:n,price:d,quantity:o,direction:i="row",children:c,style:a})=>s.jsxs("div",{className:`${$[`product-${i}`]}`,style:a,children:[s.jsx("div",{className:`${$[`productImg-${i}`]}`,children:s.jsx("img",{src:n,alt:t})}),s.jsxs("div",{className:`${$[`productInfo-${i}`]}`,children:[s.jsx("h2",{title:t,children:t}),s.jsxs("h3",{children:[d||"Invalid price"," EGP"]}),o&&s.jsxs("h3",{children:["Total Quantity: ",o]}),o&&s.jsxs("h3",{children:["Price Total: ",(o*(d||0)).toFixed(2)," EGP"]}),c]})]}),S=()=>{const t=P(),{loading:n,error:d,orderList:o}=w(l=>l.orders),[i,c]=p.useState(!1),[a,e]=p.useState([]),x=l=>{const r=o.find(h=>h.id===l),j=(r==null?void 0:r.items)??[];c(!0),e(h=>[...h,...j])},u=()=>{c(!1),e([])};return p.useEffect(()=>{const l=t(y());return()=>{l.abort(),t(H())}},[t]),{loading:n,error:d,orderList:o,showModal:i,selectedProduct:a,viewDetailsHandler:x,closeModalHandler:u}},J=()=>{const{loading:t,error:n,orderList:d,showModal:o,selectedProduct:i,viewDetailsHandler:c,closeModalHandler:a}=S();return s.jsxs(s.Fragment,{children:[s.jsxs(m,{show:o,onHide:a,children:[s.jsx(m.Header,{closeButton:!0,children:s.jsx(m.Title,{children:"Products Details"})}),s.jsx(m.Body,{children:i.map(e=>s.jsx(O,{title:e.title,img:e.img,price:e.price,quantity:e.quantity,direction:"column",style:{marginBottom:"10px"}},e.id))})]}),s.jsx(M,{title:"My Order"}),s.jsx(v,{status:t,error:n,type:"table",children:s.jsxs(I,{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Order Number"}),s.jsx("th",{children:"Items"}),s.jsx("th",{children:"Total Price"})]})}),s.jsx("tbody",{children:d.map(e=>s.jsxs("tr",{children:[s.jsxs("td",{children:["#",e.id]}),s.jsxs("td",{children:[e.items.length," item(s)"," / ",s.jsx("span",{onClick:()=>c(e.id),style:{textDecoration:"underline",cursor:"pointer"},children:"Product Details"})]}),s.jsx("td",{children:e.subtotal.toFixed(2)})]},e.id))})]})})]})};export{J as default};
